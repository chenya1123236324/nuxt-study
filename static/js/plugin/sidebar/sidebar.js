(function(){var e=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}(),t=Widget.extend({attrs:{duration_ms:200,display:"push",position:"left",contentSelector:"",classNames:{sidebar:"sidebar",content:"content",left:"sidebar-left",right:"sidebar-right",push:"sidebar-push",overlay:"sidebar-overlay",reveal:"sidebar-reveal",mask:"sidebar-mask"},status:0},setup:function(){var e=this.$element,t=this.get();this.defaultDisplay=this.get("display"),this.defaultPosition=this.get("position"),this.content=$(t.contentSelector).addClass(t.classNames.content),this.mask=$("<div></div>").addClass(t.classNames.mask).appendTo(e.parent()).hide(),this.delegateEvents(this.mask,"tap",function(){this.hide()}),this.delegateEvents(window,"resize",function(){this.mask.width(e.parent().width()-e.width())}),this.on("change:status",this._onChangeStatus),e.addClass(this.get("classNames.sidebar")),this._initDisplayFun();var n=this._getDisplayPos();e.css(this._getXCssObj(n.sidebar[0])),this.content.css(this._getXCssObj(n.cont[0])),this.render()},toggle:function(e,t){var n=this.get("status");n==0?(e=e||this.defaultDisplay,t=t||this.defaultPosition,this.show(e,t)):this.hide()},show:function(e,t){this.set("display",e),this.set("position",t),this.set("status",1)},hide:function(){this.set("status",0)},_initDisplayFun:function(){var e=this,t=["push","overlay","reveal"];$.each(t,function(t,n){e[n]=function(t){e.toggle(n,t)}})},_onChangeStatus:function(e,t){t==1?this._show():this._hide()},_onRenderDisplay:function(e,t,n){var r=this.$element,i=this.get("classNames");i[n]&&r.removeClass(i[n]),i[t]&&r.addClass(i[t])},_onRenderPosition:function(e,t,n){var r=this.$element,i=this.get("classNames");i[n]&&r.removeClass(i[n])&&this.mask.removeClass(i[n]),i[t]&&r.addClass(i[t])&&this.mask.addClass(i[t])},_show:function(){var t=this.$element,n=this._getDisplayPos(),r=this.get("duration_ms");t.css(e.css+"transition","none"),this.content.css(e.css+"transition","none"),t.css(this._getXCssObj(n.sidebar[0])),this.content.css(this._getXCssObj(n.cont[0])),t.animate(this._getXCssObj(n.sidebar[1]),r,"ease"),this.content.animate(this._getXCssObj(n.cont[1]),r,"ease"),this.mask.width(t.parent().width()-t.width()),this.mask.show()},_hide:function(){var e=this.$element,t=this._getDisplayPos(),n=this.get("duration_ms");e.animate(this._getXCssObj(t.sidebar[0]),n,"ease"),this.content.animate(this._getXCssObj(t.cont[0]),n,"ease"),this.mask.hide()},_getDisplayPos:function(){var e=this.$element.width(),t=this.get("position")=="left"?1:-1,n=this.get("display"),r={push:{sidebar:[-t*e,0],cont:[0,t*e]},overlay:{sidebar:[-t*e,0],cont:[0,0]},reveal:{sidebar:[0,0],cont:[0,t*e]}};return r[n]},_getXCssObj:function(t){var n={};return n[e.css+"transform"]="translate3d("+t+"px, 0, 0)",n}});this.Sidebar=t})();